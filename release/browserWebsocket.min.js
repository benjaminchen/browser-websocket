!function(e){function n(o){if(t[o])return t[o].exports;var s=t[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){!function(e){"function"==typeof self.define&&self.define.amd&&self.define(e);var n=document.getElementsByTagName("script"),t=n[n.length-1],o=t.getAttribute("id");o&&(self[o]=e())}(function(){return t(1)})},function(e,n){function t(e,n){return"undefined"==typeof WebSocket?!1:this===function(){return this}()?new t(e,n):(this.url=e,this.ws=new WebSocket(e),this.debugMode=n,this.events={open:[],close:[],error:[],message:[]},this.reconnectAllow=!1,this.reconnectInterval=3e3,this.reconnectTimes=3,this.reconnectedNum=0,void(n&&(this.onopen(function(){console.log("connect successful: %s ...",this.url)}),this.onclose(function(){console.log("connection interrupted ...")}),this.onerror(function(){console.log("something error ...")}),this.onmessage(function(e){console.log("received message: <-- %s ...",e)}))))}t.prototype={onopen:function(e){!this.events.open.indexOf(e)>-1&&(this.events.open=this.events.open.concat(e)),e&&this.ws.addEventListener("open",e)},onclose:function(e){!this.events.close.indexOf(e)>-1&&(this.events.close=this.events.close.concat(e)),e&&this.ws.addEventListener("close",e)},onerror:function(e){!this.events.error.indexOf(e)>-1&&(this.events.error=this.events.error.concat(e)),e&&this.ws.addEventListener("error",e)},onmessage:function(e){var n=function(n){e(n.data)};!this.events.message.indexOf(n)>-1&&(this.events.message=this.events.message.concat(n)),e&&this.ws.addEventListener("message",n)},emit:function(e){1!==this.ws.readyState&&console.log("connection is not established, please wait ..."),this.debugMode&&console.log("send message: --> %s ...",e),this.ws.send(e)},close:function(){this.debugMode&&console.log("close connection ..."),this.ws.close()},off:function(e,n){var t;this.ws.removeEventListener(e,n),(t=this.events[e].indexOf(n))>-1&&this.events[e].splice(t,1)},reconnectOn:function(){this.reconnectAllow=!0},reconnectOff:function(){this.reconnectAllow=!1},setReconnect:function(e,n){this.reconnectOn(),e||(e=this.reconnectInterval),n||(n=this.reconnectTimes);var t=this,o=function(){t.reconnectedNum>=n||!t.reconnectAllow||setTimeout(function(){t.debugMode&&console.log("try to reconnect ...");var e,n=t.events;e=new WebSocket(t.url);for(var s in n)if(n.hasOwnProperty(s))for(var i in n[s])e.addEventListener(s,n[s][i]);e.addEventListener("open",function(){t.ws=e,t.reconnectedNum=0}),e.addEventListener("close",o),t.reconnectedNum++},e)};this.onclose(o)}},e.exports=t}]);